<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rol de Cuadrillas Alsek</title>

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top left, #00ff9d 0, #001a13 40%, #000c0a 100%);
      color: #e6ffe6;
      padding: 24px;
    }

    .app-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .card {
      background: linear-gradient(145deg, #001d14, #00110d);
      border-radius: 18px;
      border: 1px solid #00ff9d55;
      box-shadow: 0 0 18px #00ff9d33;
      padding: 18px 22px;
    }

    .header-card {
      margin-bottom: 18px;
      background: linear-gradient(90deg, #00ff9d, #00d47a, #39ff14);
      color: #012012;
      border-radius: 18px;
      padding: 18px 24px;
      box-shadow: 0 0 25px #00ff9d55;
    }

    .header-title {
      font-size: 26px;
      font-weight: 800;
      text-align: center;
      text-shadow: 0 1px 2px #00000066;
    }

    .header-subtitle {
      text-align: center;
      font-size: 14px;
      font-weight: 600;
      margin-top: 4px;
      text-transform: capitalize;
    }

    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 8px;
    }

    .toolbar-middle {
      text-align: center;
      flex: 1;
    }

    .badge-week {
      display: inline-block;
      padding: 6px 14px;
      border-radius: 999px;
      background: #e5d9ff;
      color: #4a148c;
      font-weight: 700;
      font-size: 15px;
      box-shadow: 0 0 10px #9c27b060;
      margin-bottom: 2px;
    }

    .badge-month-year {
      font-size: 11px;
      color: #c8f6ff;
      text-transform: capitalize;
      text-shadow: 0 0 6px rgba(0, 255, 255, 0.35);
    }

    .btn {
      border: none;
      outline: none;
      cursor: pointer;
      font-size: 13px;
      font-weight: 700;
      padding: 7px 14px;
      border-radius: 999px;
      transition: all 0.18s ease-out;
      white-space: nowrap;
    }

    .btn-nav {
      background: #ffffff;
      color: #05633b;
      box-shadow: 0 0 10px #00ff9d55;
    }

    .btn-nav:hover {
      transform: translateY(-1px);
      box-shadow: 0 0 16px #00ff9d88;
    }

    .btn-main {
      background: linear-gradient(135deg, #00ff9d, #39ff14);
      color: #002013;
      box-shadow: 0 0 14px #00ff9d80;
    }

    .btn-main:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
      box-shadow: 0 0 18px #00ff9db3;
    }

    .btn-danger {
      background: linear-gradient(135deg, #ff1744, #ff4569);
      color: #fff;
      box-shadow: 0 0 14px #ff174480;
    }

    .btn-danger:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
      box-shadow: 0 0 18px #ff1744b3;
    }

    .btn-secondary {
      background: linear-gradient(135deg, #00d47a, #00ff9d);
      color: #012012;
      box-shadow: 0 0 10px #00ff9d66;
    }

    .btn-secondary:hover {
      filter: brightness(1.05);
      transform: translateY(-1px);
      box-shadow: 0 0 14px #00ff9d99;
    }

    .table-wrapper {
      overflow-x: auto;
      border-radius: 14px;
      border: 1px solid #00ff9d40;
      background: #000f0c;
      box-shadow: inset 0 0 10px #00ff9d22;
      margin-bottom: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      color: #f4fff8;
    }

    thead {
      background: linear-gradient(90deg, #00b36b, #00ff9d);
      color: #002013;
    }

    th, td {
      border: 1px solid #003326;
      padding: 6px 8px;
      text-align: center;
    }

    th:first-child, td:first-child {
      text-align: left;
    }

    th .day-name {
      font-weight: 700;
      font-size: 13px;
    }

    th .day-number {
      font-size: 11px;
      font-weight: 600;
      opacity: 0.9;
    }

    tbody tr:nth-child(even) {
      background: #001713;
    }

    tbody tr:nth-child(odd) {
      background: #00100d;
    }

    tbody tr:hover {
      background: #00241a;
    }

    .col-cuadrilla {
      background: linear-gradient(90deg, #003321, #00492e);
      font-weight: 600;
      color: #b9ffe0;
      position: sticky;
      left: 0;
      z-index: 1;
    }

    .input-name {
      width: 100%;
      background: #000f0c;
      border-radius: 8px;
      border: 1px solid #00ff9d66;
      padding: 4px 6px;
      color: #e6ffe6;
      font-size: 12px;
    }

    .input-name:focus {
      outline: none;
      border-color: #00ff9d;
      box-shadow: 0 0 8px #00ff9d88;
    }

    .turno-guardia {
      background: #ff1744;
      color: #ffffff;
      font-weight: 700;
      text-shadow: 0 1px 1px #00000088;
    }

    .turno-diurno {
      background: #ffe844;
      color: #332b00;
      font-weight: 600;
    }

    .turno-madrugador {
      background: #c77dff;
      color: #1c0033;
      font-weight: 700;
    }

    .turno-descanso {
      background: #4dabf7;
      color: #012033;
      font-weight: 600;
    }

    .turno-vacaciones {
      background: #ffb347;
      color: #331a00;
      font-weight: 700;
    }

    .legend-card {
      background: #00110d;
      border-radius: 14px;
      border: 1px solid #00ff9d55;
      padding: 12px 14px;
      box-shadow: 0 0 14px #00ff9d33;
    }

    .legend-title {
      font-weight: 700;
      font-size: 14px;
      margin-bottom: 6px;
    }

    .legend-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 8px;
      font-size: 12px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .legend-swatch {
      width: 14px;
      height: 14px;
      border-radius: 4px;
      box-shadow: 0 0 6px #00000088;
      border: 1px solid #00000055;
    }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal-card {
      background: radial-gradient(circle at top, #00ff9d22, #00110d 60%);
      border-radius: 18px;
      border: 1px solid #00ff9d88;
      box-shadow: 0 0 25px #00ff9d66;
      padding: 18px 20px;
      max-width: 420px;
      width: 90%;
      color: #e6ffe6;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 800;
      margin-bottom: 6px;
      text-align: center;
    }

    .modal-subtitle {
      font-size: 13px;
      text-align: center;
      margin-bottom: 10px;
      opacity: 0.9;
    }

    .modal-info {
      font-size: 13px;
      margin-bottom: 10px;
    }

    .modal-info strong {
      color: #9cffd2;
    }

    .modal-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
      margin-bottom: 12px;
      justify-content: center;
    }

    .modal-btn {
      border: none;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, filter 0.15s ease-out;
      white-space: nowrap;
    }

    .modal-btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 0 12px #000000aa;
    }

    .modal-btn-guardia {
      background: #ff1744;
      color: #fff;
    }

    .modal-btn-diurno {
      background: #ffe844;
      color: #332b00;
    }

    .modal-btn-madrugador {
      background: #c77dff;
      color: #1c0033;
    }

    .modal-btn-descanso {
      background: #4dabf7;
      color: #012033;
    }

    .modal-btn-vacaciones {
      background: #ffb347;
      color: #331a00;
    }

    .modal-btn-quitar {
      background: #37474f;
      color: #eceff1;
    }

    .modal-footer {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 4px;
    }

    .modal-footer-btn {
      border: none;
      border-radius: 999px;
      padding: 6px 14px;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
      background: #263238;
      color: #eceff1;
      transition: all 0.15s ease-out;
    }

    .modal-footer-btn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 0 10px #000000aa;
    }

    @media (max-width: 768px) {
      .toolbar {
        flex-direction: column;
        align-items: stretch;
      }
      .toolbar-middle {
        order: -1;
        margin-bottom: 8px;
      }
    }
  </style>

  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // Versión del almacenamiento. Sube este número cuando cambies cuadrillas / lógica base.
    const STORAGE_VERSION = '2';

    // LÓGICA DEL ROL — INTACTA
    const PATTERNS = [
      ['DESCANSO', 'DIURNO',  'DIURNO',  'DIURNO',  'DIURNO',  'DIURNO',  'GUARDIA'],
      ['DIURNO',   'DIURNO',  'DIURNO',  'DIURNO',  'DIURNO',  'DESCANSO','DIURNO'],
      ['DIURNO',   'DIURNO',  'DIURNO',  'DIURNO',  'DIURNO',  'DIURNO',  'DESCANSO'],
      ['DIURNO',   'DIURNO',  'DIURNO',  'DIURNO',  'DIURNO',  'GUARDIA', 'DESCANSO'],
      ['GUARDIA',  'GUARDIA', 'GUARDIA', 'GUARDIA', 'GUARDIA', 'DESCANSO','DIURNO'],
      ['GUARDIA',  'GUARDIA', 'GUARDIA', 'GUARDIA', 'GUARDIA', 'DESCANSO','MADRUGADOR'],
      ['GUARDIA',  'GUARDIA', 'GUARDIA', 'GUARDIA', 'GUARDIA', 'GUARDIA', 'DESCANSO'],
      ['MADRUGADOR','MADRUGADOR','MADRUGADOR','MADRUGADOR','MADRUGADOR','DESCANSO','GUARDIA']
    ];

    const WEEK_CYCLE = [
      [5, 6, 3, 7, 1, 0, 2],
      [3, 7, 1, 0, 2, 5, 6],
      [1, 0, 2, 4, 6, 3, 7],
      [2, 5, 6, 3, 7, 1, 0],
      [6, 3, 7, 1, 0, 2, 5],
      [7, 1, 0, 2, 5, 6, 3],
      [0, 2, 5, 6, 3, 7, 1]
    ];

    const SEMANA_BASE = 48;
    const ANO_BASE = 2025;

    function calcularDiferenciaSemanas(semana, ano) {
      return (ano - ANO_BASE) * 52 + (semana - SEMANA_BASE);
    }

    function getFechaLunes(semana, ano) {
      const base = new Date(2025, 10, 24);
      const diff = calcularDiferenciaSemanas(semana, ano);
      const fecha = new Date(base);
      fecha.setDate(fecha.getDate() + diff * 7);
      return fecha;
    }

    function getDiaMes(semana, ano, offsetDia) {
      const lunes = getFechaLunes(semana, ano);
      const fecha = new Date(lunes);
      fecha.setDate(fecha.getDate() + offsetDia);
      return fecha.getDate();
    }

    function getMesAnoTexto(semana, ano) {
      const lunes = getFechaLunes(semana, ano);
      return lunes.toLocaleDateString('es-MX', { month: 'long', year: 'numeric' });
    }

    function getTurnoSemana(idxCuadrilla, idxDia, semana, ano) {
      const diff = calcularDiferenciaSemanas(semana, ano);
      const ciclo = ((diff % 7) + 7) % 7;
      const patternIndex = WEEK_CYCLE[ciclo][idxCuadrilla];
      const pattern = PATTERNS[patternIndex];
      return pattern[idxDia];
    }

    function obtenerSemanaActual() {
      const hoy = new Date();
      const inicioAno = new Date(hoy.getFullYear(), 0, 1);
      const msPorDia = 24 * 60 * 60 * 1000;
      const diasTranscurridos = Math.floor((hoy - inicioAno) / msPorDia);
      const semanaActual = Math.ceil((diasTranscurridos + inicioAno.getDay() + 1) / 7);
      return { semanaActual, anoActual: hoy.getFullYear() };
    }

    function buildOverrideKey(ano, semana, idxCuadrilla, idxDia) {
      return `${ano}-W${semana}-C${idxCuadrilla}-D${idxDia}`;
    }

    function SistemaRolCuadrillas() {
      const { semanaActual: semanaInicial, anoActual } = obtenerSemanaActual();
      const [numeroSemana, setNumeroSemana] = useState(semanaInicial);
      const [ano, setAno] = useState(anoActual);
      const [editando, setEditando] = useState(false);
      const [esAdmin, setEsAdmin] = useState(false);

      const [cuadrillas, setCuadrillas] = useState([
        'Alejandro Sevilla',
        'Agustin Gonzalez',
        'Antonio Diaz',
        'Alberto Casillas',
        'Luis Casillas',
        'Raul Diaz',
        'Jaime Granilla'
      ]);

      const [overrides, setOverrides] = useState(() => {
        try {
          const savedVersion = window.localStorage.getItem('rolVersion');
          const storedOverrides = window.localStorage.getItem('rolCuadrillasOverrides');

          // Si la versión cambió, reseteamos overrides y escribimos la nueva versión
          if (savedVersion !== STORAGE_VERSION) {
            window.localStorage.setItem('rolVersion', STORAGE_VERSION);
            window.localStorage.removeItem('rolCuadrillasOverrides');
            return {};
          }

          return storedOverrides ? JSON.parse(storedOverrides) : {};
        } catch (e) {
          return {};
        }
      });

      const [modalOpen, setModalOpen] = useState(false);
      const [modalCell, setModalCell] = useState(null); // { idxCuadrilla, idxDia }

      useEffect(() => {
        // Detectar admin por localStorage
        try {
          const flag = window.localStorage.getItem('rolAdmin');
          if (flag === '1') {
            setEsAdmin(true);
          } else {
            setEsAdmin(false);
          }
        } catch (e) {
          setEsAdmin(false);
        }
      }, []);

      useEffect(() => {
        try {
          window.localStorage.setItem('rolCuadrillasOverrides', JSON.stringify(overrides));
        } catch (e) {
          // ignorar
        }
      }, [overrides]);

      const dias = ['L', 'M', 'Mi', 'J', 'V', 'S', 'D'];

      const handleNombreChange = (index, nuevoNombre) => {
        const nuevas = [...cuadrillas];
        nuevas[index] = nuevoNombre;
        setCuadrillas(nuevas);
      };

      const navegarSemana = (direccion) => {
        let nuevaSemana = numeroSemana + direccion;
        let nuevoAno = ano;
        if (nuevaSemana > 52) {
          nuevaSemana = 1;
          nuevoAno = ano + 1;
        } else if (nuevaSemana < 1) {
          nuevaSemana = 52;
          nuevoAno = ano - 1;
        }
        setNumeroSemana(nuevaSemana);
        setAno(nuevoAno);
      };

      const irSemanaActual = () => {
        const { semanaActual, anoActual } = obtenerSemanaActual();
        setNumeroSemana(semanaActual);
        setAno(anoActual);
      };

      function contarDescansosSemana(idxCuadrilla, semana, ano, overridesPropuesto) {
        let contador = 0;
        for (let d = 0; d < 7; d++) {
          const keyDia = buildOverrideKey(ano, semana, idxCuadrilla, d);
          const overrideDia = overridesPropuesto[keyDia];
          const baseTurno = getTurnoSemana(idxCuadrilla, d, semana, ano);
          const efectivo = overrideDia || baseTurno;
          if (efectivo === 'DESCANSO') {
            contador++;
          }
        }
        return contador;
      }

      const handleCellClick = (idxCuadrilla, idxDia) => {
        // Solo admin + modo edición pueden abrir el modal
        if (!esAdmin || !editando) return;
        setModalCell({ idxCuadrilla, idxDia });
        setModalOpen(true);
      };

      const cerrarModal = () => {
        setModalOpen(false);
        setModalCell(null);
      };

      const aplicarCambioTurno = (nuevoTurno) => {
        if (!modalCell) return;
        const { idxCuadrilla, idxDia } = modalCell;
        const key = buildOverrideKey(ano, numeroSemana, idxCuadrilla, idxDia);
        const baseTurno = getTurnoSemana(idxCuadrilla, idxDia, numeroSemana, ano);
        const overrideActual = overrides[key];

        // Quitar cambio manual
        if (nuevoTurno === null) {
          if (overrideActual) {
            const nuevos = { ...overrides };
            delete nuevos[key];
            setOverrides(nuevos);
          }
          cerrarModal();
          return;
        }

        // Si no hay cambio real, no hacemos nada
        if (!overrideActual && nuevoTurno === baseTurno) {
          cerrarModal();
          return;
        }

        const overridesPropuesto = { ...overrides, [key]: nuevoTurno };

        if (nuevoTurno === 'DESCANSO') {
          const descansos = contarDescansosSemana(
            idxCuadrilla,
            numeroSemana,
            ano,
            overridesPropuesto
          );
          if (descansos > 1) {
            const ok = window.confirm(
              'Esta cuadrilla tendrá más de un día de DESCANSO en esta semana.\n' +
              '¿Confirmas este cambio?'
            );
            if (!ok) {
              return;
            }
          }
        }

        // VACACIONES no entra en la validación de descansos

        setOverrides(overridesPropuesto);
        cerrarModal();
      };

      const obtenerNombreTurno = (turno) => {
        if (turno === 'GUARDIA') return 'Guardia';
        if (turno === 'DIURNO') return 'Diurno';
        if (turno === 'MADRUGADOR') return 'Madrugador';
        if (turno === 'DESCANSO') return 'Descanso';
        if (turno === 'VACACIONES') return 'Vacaciones';
        return '';
      };

      let modalContenido = null;
      if (modalOpen && modalCell && esAdmin) {
        const { idxCuadrilla, idxDia } = modalCell;
        const baseTurno = getTurnoSemana(idxCuadrilla, idxDia, numeroSemana, ano);
        const key = buildOverrideKey(ano, numeroSemana, idxCuadrilla, idxDia);
        const overrideTurno = overrides[key];
        const turnoActual = overrideTurno || baseTurno;

        const nombreCuadrilla = cuadrillas[idxCuadrilla];
        const nombreDia = dias[idxDia];
        const numDia = getDiaMes(numeroSemana, ano, idxDia);

        modalContenido = (
          <div className="modal-backdrop">
            <div className="modal-card">
              <div className="modal-title">Cambiar turno</div>
              <div className="modal-subtitle">
                Semana {numeroSemana} · {getMesAnoTexto(numeroSemana, ano)}
              </div>
              <div className="modal-info">
                <div><strong>Cuadrilla:</strong> {nombreCuadrilla}</div>
                <div><strong>Día:</strong> {nombreDia} {numDia}</div>
                <div><strong>Turno actual:</strong> {obtenerNombreTurno(turnoActual)}</div>
                {overrideTurno && (
                  <div style={{ marginTop: '4px', fontSize: '12px', opacity: 0.9 }}>
                    (Cambio manual aplicado sobre el rol base)
                  </div>
                )}
              </div>
              <div className="modal-options">
                <button
                  className="modal-btn modal-btn-guardia"
                  onClick={() => aplicarCambioTurno('GUARDIA')}
                >
                  Guardia
                </button>
                <button
                  className="modal-btn modal-btn-diurno"
                  onClick={() => aplicarCambioTurno('DIURNO')}
                >
                  Diurno
                </button>
                <button
                  className="modal-btn modal-btn-madrugador"
                  onClick={() => aplicarCambioTurno('MADRUGADOR')}
                >
                  Madrugador
                </button>
                <button
                  className="modal-btn modal-btn-descanso"
                  onClick={() => aplicarCambioTurno('DESCANSO')}
                >
                  Descanso
                </button>
                <button
                  className="modal-btn modal-btn-vacaciones"
                  onClick={() => aplicarCambioTurno('VACACIONES')}
                >
                  Vacaciones
                </button>
                <button
                  className="modal-btn modal-btn-quitar"
                  onClick={() => aplicarCambioTurno(null)}
                >
                  Quitar cambio manual
                </button>
              </div>
              <div className="modal-footer">
                <button className="modal-footer-btn" onClick={cerrarModal}>
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        );
      }

      return (
        <div className="app-container">
          <div className="header-card">
            <div className="header-title">Roles de Cuadrillas Alsek</div>
            <div className="header-subtitle">
              {getMesAnoTexto(numeroSemana, ano)}
            </div>
          </div>

          <div className="card" style={{ marginBottom: '14px' }}>
            <div className="toolbar">
              <button className="btn btn-nav" onClick={() => navegarSemana(-1)}>
                &larr; Anterior
              </button>

              <div className="toolbar-middle">
                <div className="badge-week">Semana {numeroSemana}</div>
                <div className="badge-month-year">
                  {getMesAnoTexto(numeroSemana, ano)}
                </div>
              </div>

              <button className="btn btn-nav" onClick={() => navegarSemana(1)}>
                Siguiente &rarr;
              </button>
            </div>

            <div className="toolbar">
              {esAdmin && (
                <button
                  className={`btn ${editando ? 'btn-danger' : 'btn-secondary'}`}
                  onClick={() => setEditando(!editando)}
                >
                  {editando ? 'Salir de edición' : 'Editar'}
                </button>
              )}

              <button className="btn btn-main" onClick={irSemanaActual}>
                Semana actual
              </button>
            </div>
          </div>

          <div className="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>Cuadrilla</th>
                  {dias.map((dia, idx) => (
                    <th key={idx}>
                      <div className="day-name">{dia}</div>
                      <div className="day-number">
                        {getDiaMes(numeroSemana, ano, idx)}
                      </div>
                    </th>
                  ))}
                </tr>
              </thead>
              <tbody>
                {cuadrillas.map((nom, i) => (
                  <tr key={i}>
                    <td className="col-cuadrilla">
                      {esAdmin && editando ? (
                        <input
                          value={nom}
                          onChange={e => handleNombreChange(i, e.target.value)}
                          className="input-name"
                        />
                      ) : (
                        nom
                      )}
                    </td>
                    {dias.map((_, diaIdx) => {
                      const baseTurno = getTurnoSemana(i, diaIdx, numeroSemana, ano);
                      const key = buildOverrideKey(ano, numeroSemana, i, diaIdx);
                      const overrideTurno = overrides[key];
                      const turno = overrideTurno || baseTurno;

                      let clase = '';
                      let texto = '';

                      if (turno === 'GUARDIA') {
                        clase = 'turno-guardia';
                        texto = 'Guardia';
                      } else if (turno === 'DIURNO') {
                        clase = 'turno-diurno';
                        texto = 'Diurno';
                      } else if (turno === 'DESCANSO') {
                        clase = 'turno-descanso';
                        texto = 'Descanso';
                      } else if (turno === 'MADRUGADOR') {
                        clase = 'turno-madrugador';
                        texto = 'Madrugador';
                      } else if (turno === 'VACACIONES') {
                        clase = 'turno-vacaciones';
                        texto = 'Vacaciones';
                      }

                      const clickable = esAdmin && editando;

                      return (
                        <td
                          key={diaIdx}
                          className={clase}
                          onClick={clickable ? () => handleCellClick(i, diaIdx) : undefined}
                          style={{ cursor: clickable ? 'pointer' : 'default' }}
                          title={overrideTurno && esAdmin ? 'Cambio manual aplicado' : ''}
                        >
                          {texto}
                        </td>
                      );
                    })}
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          <div className="legend-card">
            <div className="legend-title">Leyenda de Turnos</div>
            <div className="legend-grid">
              <div className="legend-item">
                <span className="legend-swatch" style={{ background: '#ff1744' }}></span>
                Guardia (06:00 pm – 06:00 am)
              </div>
              <div className="legend-item">
                <span className="legend-swatch" style={{ background: '#ffe844' }}></span>
                Diurno (09:00 am – 06:00 pm)
              </div>
              <div className="legend-item">
                <span className="legend-swatch" style={{ background: '#c77dff' }}></span>
                Madrugador (06:00 am – 03:00 pm)
              </div>
              <div className="legend-item">
                <span className="legend-swatch" style={{ background: '#4dabf7' }}></span>
                Descanso
              </div>
              <div className="legend-item">
                <span className="legend-swatch" style={{ background: '#ffb347' }}></span>
                Vacaciones
              </div>
            </div>
          </div>

          {modalContenido}
        </div>
      );
    }

    ReactDOM.render(<SistemaRolCuadrillas />, document.getElementById('root'));
  </script>
</body>
</html>
